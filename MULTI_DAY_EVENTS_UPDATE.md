# Обновление: Поддержка многодневных мероприятий

## Описание изменений

Добавлена возможность создавать мероприятия на несколько дней или часов с указанием времени окончания.

## Новые возможности

### 1. Поля времени окончания
- **end_date** - дата окончания мероприятия (для многодневных событий)
- **end_time** - время окончания мероприятия

### 2. Улучшенная форма создания
- Переключатель "Многодневное мероприятие или с определенным временем окончания"
- Поля для указания даты и времени окончания
- Валидация корректности времени окончания

### 3. Обновленное отображение
- В списке мероприятий показывается диапазон времени (начало - окончание)
- На странице мероприятия отображается полная информация о времени
- В модальном окне детализированная информация о продолжительности

## Технические изменения

### База данных
Добавлены новые поля в таблицу `events`:
```sql
ALTER TABLE events 
ADD COLUMN end_date DATE,
ADD COLUMN end_time TIME;
```

### Типы данных
Обновлены интерфейсы:
- `DatabaseEvent`
- `DatabaseEventInsert` 
- `DatabaseEventUpdate`
- `CreateEventData`

### Компоненты
Обновлены компоненты для поддержки новых полей:
- `CreateEventForm` - добавлены поля времени окончания
- `EventDetailModal` - отображение времени окончания
- `EventPage` - отображение времени окончания
- `EventsList` - отображение диапазона времени

### Валидация
Добавлены проверки:
- Дата окончания не может быть раньше даты начала
- Время окончания должно быть позже времени начала (для одного дня)

## Применение изменений

### 1. Обновление базы данных
Выполните SQL миграцию:
```bash
# Если используете Supabase CLI
supabase db push

# Или выполните SQL напрямую в Supabase Dashboard
# Содержимое файла add_end_datetime_fields.sql
```

### 2. Перезапуск приложения
```bash
npm run dev
```

## Использование

### Создание обычного мероприятия
1. Заполните основную информацию
2. Укажите дату и время начала
3. Оставьте переключатель "Многодневное мероприятие" выключенным

### Создание многодневного мероприятия
1. Заполните основную информацию
2. Укажите дату и время начала
3. Включите переключатель "Многодневное мероприятие или с определенным временем окончания"
4. Укажите дату окончания (для многодневных событий)
5. Укажите время окончания

### Примеры использования
- **Конференция**: 3 дня с 9:00 до 18:00 каждый день
- **Вечеринка**: один день с 20:00 до 02:00
- **Фестиваль**: выходные с пятницы по воскресенье
- **Мастер-класс**: 2 часа с 14:00 до 16:00

## Обратная совместимость

Все существующие мероприятия продолжат работать без изменений. Новые поля опциональны и не влияют на существующую функциональность.

## Файлы изменений

### Обновленные файлы:
- `src/types/database.ts` - добавлены поля end_date и end_time
- `src/components/CreateEventForm.tsx` - форма с полями времени окончания
- `src/components/EventDetailModal.tsx` - отображение времени окончания
- `src/components/EventPage.tsx` - отображение времени окончания
- `src/components/EventsList.tsx` - отображение диапазона времени
- `src/services/eventService.ts` - обработка и валидация новых полей

### Новые файлы:
- `supabase/migrations/20241220_add_event_end_datetime.sql` - миграция БД
- `add_end_datetime_fields.sql` - SQL для ручного применения
- `MULTI_DAY_EVENTS_UPDATE.md` - данная документация 